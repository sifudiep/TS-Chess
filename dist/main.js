(()=>{"use strict";var o={506:(o,i)=>{i.__esModule=!0,i.Coordinate=void 0;i.Coordinate=function(o,i){this.X=o,this.Y=i}},142:(o,i)=>{i.__esModule=!0,i.Piece=void 0;i.Piece=function(o,i,e){this.HasBeenMoved=!1,this.JustMadeFirstMove=!1,this.LegalMoves=[],this.Moves=[],this.IsWhite=o,this.CurrentPosition=i,this.Name=e}}},i={};function e(n){var t=i[n];if(void 0!==t)return t.exports;var r=i[n]={exports:{}};return o[n](r,r.exports,e),r.exports}(()=>{var o,i,n,t=e(142),r=e(506),s=!0,u=[[],[],[],[],[],[],[],[]],v=!1,a=!1;function d(o){var i,e,n,t,s,v,a,d,C,l,P,h,Y,X,c,M;if(0==o.CurrentPosition.Y||7==o.CurrentPosition.Y){var w=o.CurrentPosition,g=o.IsWhite;F(o.CurrentPosition),f(g,w),L(u[w.X][w.Y])}o.IsWhite?(o.CurrentPosition.X-1>=0&&void 0!==u[o.CurrentPosition.X-1][o.CurrentPosition.Y+1]&&!1===(null===(i=u[o.CurrentPosition.X-1][o.CurrentPosition.Y+1])||void 0===i?void 0:i.IsWhite)&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X-1,o.CurrentPosition.Y+1)),o.CurrentPosition.X+1<=7&&void 0!==u[o.CurrentPosition.X+1][o.CurrentPosition.Y+1]&&!1===(null===(e=u[o.CurrentPosition.X+1][o.CurrentPosition.Y+1])||void 0===e?void 0:e.IsWhite)&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X+1,o.CurrentPosition.Y+1)),void 0===u[o.CurrentPosition.X][o.CurrentPosition.Y+1]&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X,o.CurrentPosition.Y+1)),void 0===u[o.CurrentPosition.X][o.CurrentPosition.Y+2]&&!1===o.HasBeenMoved&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X,o.CurrentPosition.Y+2))),o.CurrentPosition.X+1<=7&&void 0!==u[o.CurrentPosition.X+1][o.CurrentPosition.Y]&&"Pawn"===(null===(n=u[o.CurrentPosition.X+1][o.CurrentPosition.Y])||void 0===n?void 0:n.Name)&&(null===(t=u[o.CurrentPosition.X+1][o.CurrentPosition.Y])||void 0===t?void 0:t.JustMadeFirstMove)&&(null===(s=u[o.CurrentPosition.X+1][o.CurrentPosition.Y])||void 0===s?void 0:s.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X+1,o.CurrentPosition.Y+1)),o.CurrentPosition.X-1>=0&&void 0!==u[o.CurrentPosition.X-1][o.CurrentPosition.Y]&&"Pawn"===(null===(v=u[o.CurrentPosition.X-1][o.CurrentPosition.Y])||void 0===v?void 0:v.Name)&&(null===(a=u[o.CurrentPosition.X-1][o.CurrentPosition.Y])||void 0===a?void 0:a.JustMadeFirstMove)&&(null===(d=u[o.CurrentPosition.X-1][o.CurrentPosition.Y])||void 0===d?void 0:d.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X-1,o.CurrentPosition.Y+1))):(o.CurrentPosition.X-1>=0&&void 0!==u[o.CurrentPosition.X-1][o.CurrentPosition.Y-1]&&!0===(null===(C=u[o.CurrentPosition.X-1][o.CurrentPosition.Y-1])||void 0===C?void 0:C.IsWhite)&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X-1,o.CurrentPosition.Y-1)),o.CurrentPosition.X+1<=7&&void 0!==u[o.CurrentPosition.X+1][o.CurrentPosition.Y-1]&&!0===(null===(l=u[o.CurrentPosition.X+1][o.CurrentPosition.Y-1])||void 0===l?void 0:l.IsWhite)&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X+1,o.CurrentPosition.Y-1)),void 0===u[o.CurrentPosition.X][o.CurrentPosition.Y-1]&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X,o.CurrentPosition.Y-1)),void 0===u[o.CurrentPosition.X][o.CurrentPosition.Y-2]&&!1===o.HasBeenMoved&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X,o.CurrentPosition.Y-2))),o.CurrentPosition.X+1<=7&&void 0!==u[o.CurrentPosition.X+1][o.CurrentPosition.Y]&&"Pawn"===(null===(P=u[o.CurrentPosition.X+1][o.CurrentPosition.Y])||void 0===P?void 0:P.Name)&&(null===(h=u[o.CurrentPosition.X+1][o.CurrentPosition.Y])||void 0===h?void 0:h.JustMadeFirstMove)&&(null===(Y=u[o.CurrentPosition.X+1][o.CurrentPosition.Y])||void 0===Y?void 0:Y.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X+1,o.CurrentPosition.Y-1)),o.CurrentPosition.X-1>=0&&void 0!==u[o.CurrentPosition.X-1][o.CurrentPosition.Y]&&"Pawn"===(null===(X=u[o.CurrentPosition.X-1][o.CurrentPosition.Y])||void 0===X?void 0:X.Name)&&(null===(c=u[o.CurrentPosition.X-1][o.CurrentPosition.Y])||void 0===c?void 0:c.JustMadeFirstMove)&&(null===(M=u[o.CurrentPosition.X-1][o.CurrentPosition.Y])||void 0===M?void 0:M.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X-1,o.CurrentPosition.Y-1)))}function C(o){for(var i,e,n,t,s=o.CurrentPosition.X-1;s>=0&&(null===(i=u[s][o.CurrentPosition.Y])||void 0===i?void 0:i.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(s,o.CurrentPosition.Y)),void 0===u[s][o.CurrentPosition.Y]);s--);for(s=o.CurrentPosition.X+1;s<=7&&(null===(e=u[s][o.CurrentPosition.Y])||void 0===e?void 0:e.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(s,o.CurrentPosition.Y)),void 0===u[s][o.CurrentPosition.Y]);s++);for(s=o.CurrentPosition.Y-1;s>=0&&(null===(n=u[o.CurrentPosition.X][s])||void 0===n?void 0:n.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X,s)),void 0===u[o.CurrentPosition.X][s]);s--);for(s=o.CurrentPosition.Y+1;s<=7&&(null===(t=u[o.CurrentPosition.X][s])||void 0===t?void 0:t.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X,s)),void 0===u[o.CurrentPosition.X][s]);s++);}function l(o){for(var i,e,n,t,s=1;o.CurrentPosition.X+s<=7&&o.CurrentPosition.Y+s<=7&&(null===(i=u[o.CurrentPosition.X+s][o.CurrentPosition.Y+s])||void 0===i?void 0:i.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X+s,o.CurrentPosition.Y+s)),void 0===u[o.CurrentPosition.X+s][o.CurrentPosition.Y+s]);s++);for(s=1;o.CurrentPosition.X-s>=0&&o.CurrentPosition.Y+s<=7&&(null===(e=u[o.CurrentPosition.X-s][o.CurrentPosition.Y+s])||void 0===e?void 0:e.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X-s,o.CurrentPosition.Y+s)),void 0===u[o.CurrentPosition.X-s][o.CurrentPosition.Y+s]);s++);for(s=1;o.CurrentPosition.X+s<=7&&o.CurrentPosition.Y-s>=0&&(null===(n=u[o.CurrentPosition.X+s][o.CurrentPosition.Y-s])||void 0===n?void 0:n.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X+s,o.CurrentPosition.Y-s)),void 0===u[o.CurrentPosition.X+s][o.CurrentPosition.Y-s]);s++);for(s=1;o.CurrentPosition.X-s>=0&&o.CurrentPosition.Y-s>=0&&(null===(t=u[o.CurrentPosition.X-s][o.CurrentPosition.Y-s])||void 0===t?void 0:t.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X-s,o.CurrentPosition.Y-s)),void 0===u[o.CurrentPosition.X-s][o.CurrentPosition.Y-s]);s++);}function P(o){var i,e,n,t,s,v,a,d,C=o.CurrentPosition.Y,l=o.CurrentPosition.X;C+2<=7&&(l+1<=7&&(null===(i=u[l+1][C+2])||void 0===i?void 0:i.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(l+1,C+2)),l-1>=0&&(null===(e=u[l-1][C+2])||void 0===e?void 0:e.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(l-1,C+2))),C-2>=0&&(l+1<=7&&(null===(n=u[l+1][C-2])||void 0===n?void 0:n.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(l+1,C-2)),l-1>=0&&(null===(t=u[l-1][C-2])||void 0===t?void 0:t.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(l-1,C-2))),l+2<=7&&(C+1<=7&&(null===(s=u[l+2][C+1])||void 0===s?void 0:s.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(l+2,C+1)),C-1>=0&&(null===(v=u[l+2][C-1])||void 0===v?void 0:v.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(l+2,C-1))),l-2>=0&&(C+1<=7&&(null===(a=u[l-2][C+1])||void 0===a?void 0:a.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(l-2,C+1)),C-1>=0&&(null===(d=u[l-2][C-1])||void 0===d?void 0:d.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(l-2,C-1)))}function h(o){var i,e,n,t,s,d,C,l,P,h,Y=o.CurrentPosition.X,X=o.CurrentPosition.Y;Y+1<=7&&(null===(i=u[Y+1][X])||void 0===i?void 0:i.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(Y+1,X)),Y+1<=7&&X+1<=7&&(null===(e=u[Y+1][X+1])||void 0===e?void 0:e.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(Y+1,X+1)),Y+1<=7&&X-1>=0&&(null===(n=u[Y+1][X-1])||void 0===n?void 0:n.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(Y+1,X-1)),Y-1>=0&&(null===(t=u[Y-1][X])||void 0===t?void 0:t.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(Y-1,X)),Y-1>=0&&X+1<=7&&(null===(s=u[Y-1][X+1])||void 0===s?void 0:s.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(Y-1,X+1)),Y-1>=0&&X-1>=0&&(null===(d=u[Y-1][X-1])||void 0===d?void 0:d.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(Y-1,X-1)),X+1<=7&&(null===(C=u[Y][X+1])||void 0===C?void 0:C.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(Y,X+1)),X-1>=0&&(null===(l=u[Y][X-1])||void 0===l?void 0:l.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(Y,X-1));var c=o.IsWhite?v:a;o.HasBeenMoved||c||(void 0===u[5][o.CurrentPosition.Y]&&void 0===u[6][o.CurrentPosition.Y]&&void 0!==u[7][o.CurrentPosition.Y]&&!1===(null===(P=u[7][o.CurrentPosition.Y])||void 0===P?void 0:P.HasBeenMoved)&&(o.LegalMoves.push(new r.Coordinate(6,o.CurrentPosition.Y)),o.LegalMoves.push(new r.Coordinate(7,o.CurrentPosition.Y))),void 0===u[3][o.CurrentPosition.Y]&&void 0===u[2][o.CurrentPosition.Y]&&void 0!==u[0][o.CurrentPosition.Y]&&!1===(null===(h=u[0][o.CurrentPosition.Y])||void 0===h?void 0:h.HasBeenMoved)&&(o.LegalMoves.push(new r.Coordinate(2,o.CurrentPosition.Y)),o.LegalMoves.push(new r.Coordinate(0,o.CurrentPosition.Y))))}function Y(o,i){var e=new t.Piece(o,i,"Pawn");e.Moves.push(d),u[e.CurrentPosition.X][e.CurrentPosition.Y]=e}function X(o,i){var e=new t.Piece(o,i,"Rook");e.Moves.push(C),u[e.CurrentPosition.X][e.CurrentPosition.Y]=e}function c(o,i){var e=new t.Piece(o,i,"Bishop");e.Moves.push(l),u[e.CurrentPosition.X][e.CurrentPosition.Y]=e}function M(o,i){var e=new t.Piece(o,i,"Knight");e.Moves.push(P),u[e.CurrentPosition.X][e.CurrentPosition.Y]=e}function w(o,e){var r=new t.Piece(o,e,"King");r.Moves.push(h),u[r.CurrentPosition.X][r.CurrentPosition.Y]=r,o?i=r:n=r}function f(o,i){var e=new t.Piece(o,i,"Queen");e.Moves.push(l),e.Moves.push(C),u[e.CurrentPosition.X][e.CurrentPosition.Y]=e}function g(){for(var o=0;o<8;o++)for(var i=0;i<8;i++){var e=u[i][o];if(void 0!==e){var n=document.getElementById("row-"+(o+1));if(null==n)throw Error;0===n.children[i].children.length&&L(e)}}}function I(o){var i=document.getElementById("row-"+(o.Y+1));if(null!=i)return i.children[o.X];throw Error}function p(o){var i=I(o);null!=i.firstElementChild&&i.removeChild(i.firstElementChild)}function W(o,i){u[o.CurrentPosition.X][o.CurrentPosition.Y]=void 0,o.CurrentPosition=i,u[o.CurrentPosition.X][o.CurrentPosition.Y]=o}function L(o){var i,e=I(o.CurrentPosition),n=(i=o.CurrentPosition,u[i.X][i.Y]);if(null==n)throw Error;for(;null!=e.firstElementChild;)e.removeChild(e.firstElementChild);var t=document.createElement("div");t.setAttribute("style",'background-image: url("./pieces/'+(n.IsWhite?"light":"dark")+"-"+n.Name.toLowerCase()+'.svg")'),t.setAttribute("class"," piece-background"),t.setAttribute("draggable","true"),e.appendChild(t)}function m(o,i){var e,n;if("King"===o.Name){var t=o.CurrentPosition.X-i.X;if(Math.abs(t)>1)if(t>0){for(var v=3;v>=2;v--)if(E(o,new r.Coordinate(v,o.CurrentPosition.Y)))return;i.X=2,m(u[0][o.CurrentPosition.Y],new r.Coordinate(3,o.CurrentPosition.Y))}else{for(v=5;v<=6;v++)if(E(o,new r.Coordinate(v,o.CurrentPosition.Y)))return;i.X=6,m(u[7][o.CurrentPosition.Y],new r.Coordinate(5,o.CurrentPosition.Y))}}if("Pawn"===o.Name&&(!1===o.HasBeenMoved&&(o.JustMadeFirstMove=!0),void 0===u[i.X][i.Y])){var a=o.IsWhite?i.Y-1:i.Y+1;console.log(""),void 0!==u[i.X][a]&&"Pawn"===(null===(e=u[i.X][a])||void 0===e?void 0:e.Name)&&(null===(n=u[i.X][a])||void 0===n?void 0:n.IsWhite)!==o.IsWhite&&F(new r.Coordinate(i.X,a))}var d=o.CurrentPosition;p(d),F(i),W(o,i),L(o),u[d.X][d.Y]=void 0,s=!s,b()}function E(o,i){var e=o.CurrentPosition,n=u[i.X][i.Y];B(o),W(o,i),b();var t=!1;return o.IsWhite&&v&&(t=!0),!1===o.IsWhite&&a&&(t=!0),W(o,e),N(o),void 0!==n&&W(n,n.CurrentPosition),g(),t}function N(o){o.LegalMoves=[];for(var i=0;i<o.Moves.length;i++)o.Moves[i](o)}function B(o){for(var i=0;i<o.LegalMoves.length;i++){var e=I(o.LegalMoves[i]);e.className=e.className.replace(" legalMove","")}}function b(){v=!1,a=!1;for(var o=function(o){for(var e=function(e){if(void 0===u[e][o])return"continue";N(u[e][o]);var t=u[e][o].IsWhite?n:i;u[e][o].LegalMoves.forEach((function(i){var n;i.X===t.CurrentPosition.X&&i.Y===t.CurrentPosition.Y&&((null===(n=u[e][o])||void 0===n?void 0:n.IsWhite)?a=!0:v=!0)}))},t=0;t<=7;t++)e(t)},e=0;e<=7;e++)o(e)}function F(o){void 0!==u[o.X][o.Y]&&(p(o),u[o.X][o.Y]=void 0)}!function(){var o=document.getElementById("chessBoard");if(null==o)throw Error;for(var i=!0,e=0;e<o.children.length;e++){for(var n=o.children[e],t=0;t<n.children.length;t++)n.children[t].className+=i?" light-cell":" dark-cell",i=!i;i=!i}}(),function(){for(var o=0;o<8;o++)Y(!0,new r.Coordinate(o,1));for(X(!0,new r.Coordinate(0,0)),X(!0,new r.Coordinate(7,0)),M(!0,new r.Coordinate(1,0)),M(!0,new r.Coordinate(6,0)),c(!0,new r.Coordinate(2,0)),c(!0,new r.Coordinate(5,0)),w(!0,new r.Coordinate(4,0)),f(!0,new r.Coordinate(3,0)),o=0;o<8;o++)Y(!1,new r.Coordinate(o,6));X(!1,new r.Coordinate(0,7)),X(!1,new r.Coordinate(7,7)),M(!1,new r.Coordinate(1,7)),M(!1,new r.Coordinate(6,7)),c(!1,new r.Coordinate(2,7)),c(!1,new r.Coordinate(5,7)),w(!1,new r.Coordinate(4,7)),f(!1,new r.Coordinate(3,7))}(),g(),document.addEventListener("dragstart",(function(i){var e=parseInt(i.path[1].id.replace("col-",""))-1,n=parseInt(i.path[1].getAttribute("row"))-1,t=u[e][n];null!=t&&(t.IsWhite,N(t),function(o){for(var i=0;i<o.LegalMoves.length;i++)I(o.LegalMoves[i]).className+=" legalMove"}(t),o=t)})),document.addEventListener("dragend",(function(i){var e=parseInt(i.path[1].id.replace("col-",""))-1,n=parseInt(i.path[1].getAttribute("row"))-1;null!=u[e][n]&&B(o)})),document.addEventListener("dragover",(function(o){o.preventDefault()})),document.addEventListener("drop",(function(i){if(i.preventDefault(),!i)return!1;if(i.target.className.includes("legalMove")||i.target.parentElement.className.includes("legalMove")){var e=function(o){var i;if("DIV"===o.nodeName)i=o;else{if("IMG"!==o.nodeName)throw Error;i=o.parentElement}var e=parseInt(i.getAttribute("row"))-1,n=parseInt(i.id.replace("col-",""))-1;return new r.Coordinate(n,e)}(i.target.className.includes("legalMove")?i.target:i.target.parentElement);!1===E(o,e)&&(function(){for(var o=0;o<=7;o++)for(var i=0;i<=7;i++){var e=u[i][o];void 0!==e&&"Pawn"===e.Name&&e.JustMadeFirstMove&&(e.JustMadeFirstMove=!1)}}(),m(o,e),o.HasBeenMoved=!0,g()),B(o)}})),b()})()})();