(()=>{"use strict";var o={506:(o,e)=>{e.__esModule=!0,e.Coordinate=void 0;e.Coordinate=function(o,e){this.X=o,this.Y=e}},142:(o,e)=>{e.__esModule=!0,e.Piece=void 0;e.Piece=function(o,e,i){this.HasBeenMoved=!1,this.LegalMoves=[],this.Moves=[],this.IsWhite=o,this.CurrentPosition=e,this.Name=i}}},e={};function i(n){var t=e[n];if(void 0!==t)return t.exports;var r=e[n]={exports:{}};return o[n](r,r.exports,i),r.exports}(()=>{var o,e,n,t=i(142),r=i(506),s=!0,u=[[],[],[],[],[],[],[],[]];function a(o){var e,i,n,t;if(0==o.CurrentPosition.Y||7==o.CurrentPosition.Y){var s=o.CurrentPosition,a=o.IsWhite;L(o.CurrentPosition),w(a,s),X(u[s.X][s.Y])}o.IsWhite?(o.CurrentPosition.X-1>=0&&void 0!==u[o.CurrentPosition.X-1][o.CurrentPosition.Y+1]&&!1===(null===(e=u[o.CurrentPosition.X-1][o.CurrentPosition.Y+1])||void 0===e?void 0:e.IsWhite)&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X-1,o.CurrentPosition.Y+1)),o.CurrentPosition.X+1<=7&&void 0!==u[o.CurrentPosition.X+1][o.CurrentPosition.Y+1]&&!1===(null===(i=u[o.CurrentPosition.X+1][o.CurrentPosition.Y+1])||void 0===i?void 0:i.IsWhite)&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X+1,o.CurrentPosition.Y+1)),void 0===u[o.CurrentPosition.X][o.CurrentPosition.Y+1]&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X,o.CurrentPosition.Y+1)),void 0===u[o.CurrentPosition.X][o.CurrentPosition.Y+2]&&!1===o.HasBeenMoved&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X,o.CurrentPosition.Y+2)))):(o.CurrentPosition.X-1>=0&&void 0!==u[o.CurrentPosition.X-1][o.CurrentPosition.Y-1]&&!0===(null===(n=u[o.CurrentPosition.X-1][o.CurrentPosition.Y-1])||void 0===n?void 0:n.IsWhite)&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X-1,o.CurrentPosition.Y-1)),o.CurrentPosition.X+1<=7&&void 0!==u[o.CurrentPosition.X+1][o.CurrentPosition.Y-1]&&!0===(null===(t=u[o.CurrentPosition.X+1][o.CurrentPosition.Y-1])||void 0===t?void 0:t.IsWhite)&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X+1,o.CurrentPosition.Y-1)),void 0===u[o.CurrentPosition.X][o.CurrentPosition.Y-1]&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X,o.CurrentPosition.Y-1)),void 0===u[o.CurrentPosition.X][o.CurrentPosition.Y-2]&&!1===o.HasBeenMoved&&o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X,o.CurrentPosition.Y-2))))}function d(o){for(var e,i,n,t,s=o.CurrentPosition.X-1;s>=0&&(null===(e=u[s][o.CurrentPosition.Y])||void 0===e?void 0:e.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(s,o.CurrentPosition.Y)),void 0===u[s][o.CurrentPosition.Y]);s--);for(s=o.CurrentPosition.X+1;s<=7&&(null===(i=u[s][o.CurrentPosition.Y])||void 0===i?void 0:i.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(s,o.CurrentPosition.Y)),void 0===u[s][o.CurrentPosition.Y]);s++);for(s=o.CurrentPosition.Y-1;s>=0&&(null===(n=u[o.CurrentPosition.X][s])||void 0===n?void 0:n.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X,s)),void 0===u[o.CurrentPosition.X][s]);s--);for(s=o.CurrentPosition.Y+1;s<=7&&(null===(t=u[o.CurrentPosition.X][s])||void 0===t?void 0:t.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X,s)),void 0===u[o.CurrentPosition.X][s]);s++);}function l(o){for(var e,i,n,t,s=1;o.CurrentPosition.X+s<=7&&o.CurrentPosition.Y+s<=7&&(null===(e=u[o.CurrentPosition.X+s][o.CurrentPosition.Y+s])||void 0===e?void 0:e.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X+s,o.CurrentPosition.Y+s)),void 0===u[o.CurrentPosition.X+s][o.CurrentPosition.Y+s]);s++);for(s=1;o.CurrentPosition.X-s>=0&&o.CurrentPosition.Y+s<=7&&(null===(i=u[o.CurrentPosition.X-s][o.CurrentPosition.Y+s])||void 0===i?void 0:i.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X-s,o.CurrentPosition.Y+s)),void 0===u[o.CurrentPosition.X-s][o.CurrentPosition.Y+s]);s++);for(s=1;o.CurrentPosition.X+s<=7&&o.CurrentPosition.Y-s>=0&&(null===(n=u[o.CurrentPosition.X+s][o.CurrentPosition.Y-s])||void 0===n?void 0:n.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X+s,o.CurrentPosition.Y-s)),void 0===u[o.CurrentPosition.X+s][o.CurrentPosition.Y-s]);s++);for(s=1;o.CurrentPosition.X-s>=0&&o.CurrentPosition.Y-s>=0&&(null===(t=u[o.CurrentPosition.X-s][o.CurrentPosition.Y-s])||void 0===t?void 0:t.IsWhite)!==o.IsWhite&&(o.LegalMoves.push(new r.Coordinate(o.CurrentPosition.X-s,o.CurrentPosition.Y-s)),void 0===u[o.CurrentPosition.X-s][o.CurrentPosition.Y-s]);s++);}function v(o){var e,i,n,t,s,a,d,l,v=o.CurrentPosition.Y,C=o.CurrentPosition.X;v+2<=7&&(C+1<=7&&(null===(e=u[C+1][v+2])||void 0===e?void 0:e.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(C+1,v+2)),C-1>=0&&(null===(i=u[C-1][v+2])||void 0===i?void 0:i.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(C-1,v+2))),v-2>=0&&(C+1<=7&&(null===(n=u[C+1][v-2])||void 0===n?void 0:n.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(C+1,v-2)),C-1>=0&&(null===(t=u[C-1][v-2])||void 0===t?void 0:t.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(C-1,v-2))),C+2<=7&&(v+1<=7&&(null===(s=u[C+2][v+1])||void 0===s?void 0:s.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(C+2,v+1)),v-1>=0&&(null===(a=u[C+2][v-1])||void 0===a?void 0:a.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(C+2,v-1))),C-2>=0&&(v+1<=7&&(null===(d=u[C-2][v+1])||void 0===d?void 0:d.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(C-2,v+1)),v-1>=0&&(null===(l=u[C-2][v-1])||void 0===l?void 0:l.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(C-2,v-1)))}function C(o){var e,i,n,t,s,a,d,l,v=o.CurrentPosition.X,C=o.CurrentPosition.Y;v+1<=7&&(null===(e=u[v+1][C])||void 0===e?void 0:e.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(v+1,C)),v+1<=7&&C+1<=7&&(null===(i=u[v+1][C+1])||void 0===i?void 0:i.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(v+1,C+1)),v+1<=7&&C-1>=0&&(null===(n=u[v+1][C-1])||void 0===n?void 0:n.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(v+1,C-1)),v-1>=0&&(null===(t=u[v-1][C])||void 0===t?void 0:t.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(v-1,C)),v-1>=0&&C+1<=7&&(null===(s=u[v-1][C+1])||void 0===s?void 0:s.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(v-1,C+1)),v-1>=0&&C-1>=0&&(null===(a=u[v-1][C-1])||void 0===a?void 0:a.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(v-1,C-1)),C+1<=7&&(null===(d=u[v][C+1])||void 0===d?void 0:d.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(v,C+1)),C-1>=0&&(null===(l=u[v][C-1])||void 0===l?void 0:l.IsWhite)!==o.IsWhite&&o.LegalMoves.push(new r.Coordinate(v,C-1))}function h(o,e){var i=new t.Piece(o,e,"Pawn");i.Moves.push(a),u[i.CurrentPosition.X][i.CurrentPosition.Y]=i}function P(o,e){var i=new t.Piece(o,e,"Rook");i.Moves.push(d),u[i.CurrentPosition.X][i.CurrentPosition.Y]=i}function c(o,e){var i=new t.Piece(o,e,"Bishop");i.Moves.push(l),u[i.CurrentPosition.X][i.CurrentPosition.Y]=i}function g(o,e){var i=new t.Piece(o,e,"Knight");i.Moves.push(v),u[i.CurrentPosition.X][i.CurrentPosition.Y]=i}function f(o,i){var r=new t.Piece(o,i,"King");r.Moves.push(C),u[r.CurrentPosition.X][r.CurrentPosition.Y]=r,o?e=r:n=r}function w(o,e){var i=new t.Piece(o,e,"Queen");i.Moves.push(l),i.Moves.push(d),u[i.CurrentPosition.X][i.CurrentPosition.Y]=i}function I(o){var e=document.getElementById("row-"+(o.Y+1));if(null!=e)return e.children[o.X];throw Error}function p(o){var e=I(o);null!=e.firstElementChild&&e.removeChild(e.firstElementChild)}function X(o){var e,i=I(o.CurrentPosition),n=(e=o.CurrentPosition,u[e.X][e.Y]);if(null==n)throw Error;for(;null!=i.firstElementChild;)i.removeChild(i.firstElementChild);var t=document.createElement("div");t.setAttribute("style",'background-image: url("./pieces/'+(n.IsWhite?"light":"dark")+"-"+n.Name.toLowerCase()+'.svg")'),t.setAttribute("class"," piece-background"),t.setAttribute("draggable","true"),i.appendChild(t)}function Y(o){o.LegalMoves=[];for(var e=0;e<o.Moves.length;e++)o.Moves[e](o)}function M(o){for(var e=0;e<o.LegalMoves.length;e++){var i=I(o.LegalMoves[e]);i.className=i.className.replace(" legalMove","")}console.log("UNhighlighting...")}function W(){for(var o=0;o<=7;o++)for(var i=function(i){if(void 0===u[i][o])return"continue";Y(u[i][o]);var t=u[i][o].IsWhite?n:e;u[i][o].LegalMoves.forEach((function(o){o.X===t.CurrentPosition.X&&o.Y===t.CurrentPosition.Y&&console.log("CHECKED!!!")}))},t=0;t<=7;t++)i(t);return console.log("done with finding checks...."),{blackKingIsChecked:!1,whiteKingIsChecked:!1}}function L(o){void 0!==u[o.X][o.Y]&&(p(o),u[o.X][o.Y]=void 0)}!function(){var o=document.getElementById("chessBoard");if(null==o)throw Error;for(var e=!0,i=0;i<o.children.length;i++){for(var n=o.children[i],t=0;t<n.children.length;t++)n.children[t].className+=e?" light-cell":" dark-cell",e=!e;e=!e}}(),function(){for(var o=0;o<8;o++)h(!0,new r.Coordinate(o,1));for(P(!0,new r.Coordinate(0,0)),P(!0,new r.Coordinate(7,0)),g(!0,new r.Coordinate(1,0)),g(!0,new r.Coordinate(6,0)),c(!0,new r.Coordinate(2,0)),c(!0,new r.Coordinate(5,0)),f(!0,new r.Coordinate(4,0)),w(!0,new r.Coordinate(3,0)),o=0;o<8;o++)h(!1,new r.Coordinate(o,6));P(!1,new r.Coordinate(0,7)),P(!1,new r.Coordinate(7,7)),g(!1,new r.Coordinate(1,7)),g(!1,new r.Coordinate(6,7)),c(!1,new r.Coordinate(2,7)),c(!1,new r.Coordinate(5,7)),f(!1,new r.Coordinate(4,7)),w(!1,new r.Coordinate(3,7))}(),function(){for(var o=0;o<8;o++)for(var e=0;e<8;e++){var i=u[e][o];if(void 0!==i){var n=document.getElementById("row-"+(o+1));if(null==n)throw Error;0===n.children[e].children.length&&X(i)}}}(),document.addEventListener("dragstart",(function(e){var i=parseInt(e.path[1].id.replace("col-",""))-1,n=parseInt(e.path[1].getAttribute("row"))-1,t=u[i][n];null!=t&&t.IsWhite===s&&(function(o){for(var e=0;e<o.LegalMoves.length;e++)I(o.LegalMoves[e]).className+=" legalMove";console.log("highlighting...")}(t),o=t)})),document.addEventListener("dragend",(function(e){var i=parseInt(e.path[1].id.replace("col-",""))-1,n=parseInt(e.path[1].getAttribute("row"))-1;null!=u[i][n]&&M(o)})),document.addEventListener("dragover",(function(o){o.preventDefault()})),document.addEventListener("drop",(function(e){if(e.preventDefault(),!e)return!1;if(e.target.className.includes("legalMove")||e.target.parentElement.className.includes("legalMove")){var i=function(o){var e;if("DIV"===o.nodeName)e=o;else{if("IMG"!==o.nodeName)throw Error;e=o.parentElement}var i=parseInt(e.getAttribute("row"))-1,n=parseInt(e.id.replace("col-",""))-1;return new r.Coordinate(n,i)}(e.target.className.includes("legalMove")?e.target:e.target.parentElement);M(o),t=i,a=(n=o).CurrentPosition,p(n.CurrentPosition),L(t),function(o,e){u[o.CurrentPosition.X][o.CurrentPosition.Y]=void 0,o.CurrentPosition=e,u[o.CurrentPosition.X][o.CurrentPosition.Y]=o,o.HasBeenMoved=!0}(n,t),X(n),u[a.X][a.Y]=void 0,s=!s,W()}var n,t,a})),W()})()})();